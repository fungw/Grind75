/**
 * @param {character[][]} grid
 * @return {number}
 */
var numIslands = function(grid) {
    const visited = new Map();
    const stack = [];
    const land = "1";
    const water = "0";
    const direction = [-1, 0, 1, 0, -1];
    let islandCounter = 0;

    function findIsland() {
      const [i, j] = stack.pop();
      for (var k=0; k<direction.length-1; k++) {
        const iIndex = i + direction[k];
        const jIndex = j + direction[k+1];
        const hash = iIndex.toString() + ',' + jIndex.toString();
        if (grid[iIndex] &&
          grid[iIndex][jIndex] &&
          grid[iIndex][jIndex] === land &&
          !visited.get(hash)) {
            stack.push([iIndex, jIndex]);
            visited.set(hash, islandCounter);
        }
      }

      if (stack.length >= 1) {
        findIsland();
      }
    };
    
    for (let i=0; i<grid.length; i++) {
        for (let j=0; j<grid[i].length; j++) {
          const hash = i.toString() + ',' + j.toString();
          if (grid[i][j] === land && !visited.get(hash)) {
            islandCounter++;
            stack.push([i, j]);
            visited.set(hash, islandCounter);
            findIsland();
          }
        }
    }
    return islandCounter;
};

const test_case1 = [
  ["1","1","1","1","0"],
  ["1","1","0","1","0"],
  ["1","1","0","0","0"],
  ["0","0","0","0","0"] 
];
console.log(numIslands(test_case1));
const test_case2 = [
  ["1","1","0","0","0"],
  ["1","1","0","0","0"],
  ["0","0","1","0","0"],
  ["0","0","0","1","1"]
];
console.log(numIslands(test_case2));
const test_case3 = [["1","0","0","1","1","1","0","1","1","0","0","0","0","0","0","0","0","0","0","0"],["1","0","0","1","1","0","0","1","0","0","0","1","0","1","0","1","0","0","1","0"],["0","0","0","1","1","1","1","0","1","0","1","1","0","0","0","0","1","0","1","0"],["0","0","0","1","1","0","0","1","0","0","0","1","1","1","0","0","1","0","0","1"],["0","0","0","0","0","0","0","1","1","1","0","0","0","0","0","0","0","0","0","0"],["1","0","0","0","0","1","0","1","0","1","1","0","0","0","0","0","0","1","0","1"],["0","0","0","1","0","0","0","1","0","1","0","1","0","1","0","1","0","1","0","1"],["0","0","0","1","0","1","0","0","1","1","0","1","0","1","1","0","1","1","1","0"],["0","0","0","0","1","0","0","1","1","0","0","0","0","1","0","0","0","1","0","1"],["0","0","1","0","0","1","0","0","0","0","0","1","0","0","1","0","0","0","1","0"],["1","0","0","1","0","0","0","0","0","0","0","1","0","0","1","0","1","0","1","0"],["0","1","0","0","0","1","0","1","0","1","1","0","1","1","1","0","1","1","0","0"],["1","1","0","1","0","0","0","0","1","0","0","0","0","0","0","1","0","0","0","1"],["0","1","0","0","1","1","1","0","0","0","1","1","1","1","1","0","1","0","0","0"],["0","0","1","1","1","0","0","0","1","1","0","0","0","1","0","1","0","0","0","0"],["1","0","0","1","0","1","0","0","0","0","1","0","0","0","1","0","1","0","1","1"],["1","0","1","0","0","0","0","0","0","1","0","0","0","1","0","1","0","0","0","0"],["0","1","1","0","0","0","1","1","1","0","1","0","1","0","1","1","1","1","0","0"],["0","1","0","0","0","0","1","1","0","0","1","0","1","0","0","1","0","0","1","1"],["0","0","0","0","0","0","1","1","1","1","0","1","0","0","0","1","1","0","0","0"]];
console.log(numIslands(test_case3));